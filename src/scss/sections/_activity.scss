.activity, .filter {
    @include clearfix;
}

.activity .round-icon, .filter .round-icon {
    float: left;
    cursor: pointer;
}

/**
Activity componenet
*/

.activity li {
    overflow: hidden;
    & + li {
        margin-top: $gutter * 1.5;
    }
}

.activity .round-icon {
    margin-right: $gutter;
}

.activity .copy-wrap {
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
    span {
        display: block;
        &:not(.heavy) {
            color: $copy-secondary;
        }
    }
}


.activity li:not(.source-initial) .round-icon:hover {
    background-image: none;
    background-color: $accent-color;
    &:after {
        $revealduration: 500ms;
        content: "";
        background: transparent url("#{$image-url}icons/exit-page-wh.svg") no-repeat center center;
        background-size: 50%;
        @include position(absolute, 0 0 0 0);
        @include animation(screw-scale-in $revealduration, fadein $revealduration);
       // @include animation-base;
    }
}

/**
Activity transitions
*/
$source-entrance-duration: 500ms;
.source-initial {
    .round-icon {
        @include transform(scale(0));
    }
    .copy-wrap {
        @include transform(translateX(-250%));
    }
}

.source-enter {
    .round-icon, .copy-wrap {
        @include animation(transform-reset $source-entrance-duration $ease-out-quint, fadein $source-entrance-duration $ease-out-quint);
        // @include animation-base;
    }
    .round-icon {
        @include animation-delay($source-entrance-duration * 0.65);
    }
}



/**
Filter
*/
.filter {
    margin-bottom: 2 * $gutter;
    @include transform-style(preserve-3d);
}

.filter:not(.reveal-filter) {
    pointer-events: none;
}

.filter .round-icon {
    box-shadow: $shadow-depth-1;
    @include transition(box-shadow 250ms $ease-out-quint);
}

.filter.reveal-filter .round-icon.control {
    @include animation(screw-scale-in 550ms, fadein 200ms);
    // @include animation-base;
}

.filter .round-icon.control {
    background-color: $neutral;
    opacity: 0;
}

.filter .round-icon:not(.control) {
    background-color: $neutral-darker;
    opacity: 0;
    position: relative;
    // TODO : Pointer event polyfill
    pointer-events: none;
    span {
        color: $black;
        font-family: $heavy-font-family;
        @include scut-center-transform;
    }
}


.filter .round-icon:nth-child(2) {
    @include transform(translate3d(-100%, 0, -1px));
}
.filter .round-icon:nth-child(3) {
    @include transform(translate3d(-200%, 0, -2px));
}
.filter .round-icon:nth-child(4) {
    @include transform(translate3d(-300%, 0, -3px));
}

.reveal-filter-options .round-icon {
    margin-right: $gutter;
}

.reveal-filter-options .round-icon:not(.control) {
    // opacity: 1;
    pointer-events: all;
    // @include transform(none);
    // @include transition(transform 500ms $ease-out-quint, opacity 350ms $ease-out-quint, box-shadow 150ms);
    @include animation(transform-reset 500ms, fadein 350ms);
    // @include animation-base;
    &:hover {
        background-color: darken($neutral-darker, 5);
    }
    &.active {
        box-shadow: none;
        background-color: darken($neutral-darker, 10);
    }
}

.reveal-filter-options .round-icon.control {
    background-image: none;
    background-color: $black;
    box-shadow: none;
    @include transition(background-color 250ms $ease-out-quint);
    &:after {
        content: "";
        background: transparent url("#{$image-url}icons/clear-wh.svg") no-repeat center center;
        background-size: 50%;
        @include position(absolute, 0 0 0 0);
        @include animation(screw-scale-in 250ms, fadein 250ms);
        // @include animation-base;
    }
}

.activity li:not(.source-initial) .round-icon:hover:after, .source-enter .round-icon,  .source-enter .copy-wrap, .filter.reveal-filter .round-icon, .reveal-filter-options .round-icon.control:after, .filter.reveal-filter .round-icon.control {
    @include animation-base;
}

// .transition-to-medium:after, .transition-to-twitter:after, .transition-to-github:after {
//     content: "";
//     @include position(absolute, 0 0 0 0);
//     border-radius: 100%;
//     background-size: 50%;
//     background-repeat: no-repeat;
//     background-position: center center;
//     @include animation-name(fadein);
//     @include animation-duration(350ms);
//     @include animation-base;
// }

// .transition-to-medium:after {
//     @include icon-medium;
// }
// .transition-to-twitter:after {
//     @include icon-twitter;
// }
// .transition-to-github:after {
//     @include icon-github;
// }
