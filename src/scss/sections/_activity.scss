.activity, .filter {
    @include clearfix;
}

.activity .round-icon, .filter .round-icon {
    float: left;
    margin-right: $gutter;
    cursor: pointer;
    @include transition(background-image);
}

/**
Activity componenet
*/

.activity li {
    position: relative;
    overflow: hidden;
    @include clearfix;
}

.activity li + li {
    margin-top: $gutter;
}

.activity .copy-wrap {
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
    span {
        display: block;
        &:not(.heavy) {
            color: $copy-secondary;
        }
    }
}


.activity li .round-icon:hover {
    background-image:url("#{$image-url}icons/exit-page-wh.svg");
    background-color: $accent-color;
    background-size: 50%;
    @include swap-bg-image;
}

/**
Activity transitions
*/
$source-entrance-duration: 500ms;
.source-initial {
    // .round-icon, .copy-wrap {
    //     @include animation-base;
    // }
    .round-icon {
        @include transform(scale(0, 0));
    }
    .copy-wrap {
        @include transform(translateX(-250%));
    }
}

.source-enter {
    .round-icon {
        @include animation(transform-reset $source-entrance-duration $ease-out-quint, fadein $source-entrance-duration $ease-out-quint);
        @include animation-delay($source-entrance-duration * 0.65);
    }
    .copy-wrap {
        @include animation(transform-reset $source-entrance-duration $ease-out-quint, fadein $source-entrance-duration $ease-out-quint);
    }
    .round-icon, .copy-wrap {
        @include animation-base;
    }
}

@include keyframes(source-copy-enter){
    to {
        opacity: 1;
        @include transform(none);
    }
};
@include keyframes(source-icon-enter){
    to {
        @include transform(none);
    }
};

.transition-to-medium:after, .transition-to-twitter:after, .transition-to-github:after {
    content: "";
    @include position(absolute, 0 0 0 0);
    border-radius: 100%;
    background-size: 50%;
    background-repeat: no-repeat;
    background-position: center center;
    @include animation-name(fadein);
    @include animation-duration(350ms);
    @include animation-base;
}

.transition-to-medium:after {
    @include icon-medium;
}
.transition-to-twitter:after {
    @include icon-twitter;
}
.transition-to-github:after {
    @include icon-github;
}


/**
Filter
*/
.filter {
    margin-bottom: 2 * $gutter;
    @include transform-style(preserve-3d);
}

.filter .round-icon.control {
    background-color: $neutral;
    box-shadow: $shadow-depth-1;
    @include transition(background-image, box-shadow 250ms $ease-out-quint, background-color 250ms $ease-out-quint);
}

.filter .round-icon:not(.control) {
    background-color: $neutral-darker;
    opacity: 0;
    // TODO : Pointer event polyfill
    pointer-events: none;
    position: relative;
    box-shadow: $shadow-depth-1;
    @include transition(transform 250ms $ease-out-quint, opacity 150ms $ease-out-quint, background-color 250ms $ease-out-quint);
    span {
        color: $black;
        font-family: $heavy-font-family;
        @include transition(opacity 250ms);
        @include scut-center-transform;
    }
}

// $filter-reveal-delay: 250ms;

.filter .round-icon:nth-child(2) {
    @include transform(translate3d(-120%, 0, -1px));
}
.filter .round-icon:nth-child(3) {
    @include transform(translate3d(-230%, 0, -2px));
}
.filter .round-icon:nth-child(4) {
    @include transform(translate3d(-340%, 0, -3px));
}

.reveal-filter-options .round-icon:not(.control) {
    opacity: 1;
    pointer-events: all;
    @include transform(none);
    @include transition(transform 500ms $ease-out-quint, opacity 150ms $ease-out-quint, background-color 250ms $ease-out-quint, box-shadow 250ms $ease-out-quint); 
    &:hover {
        background-color: darken($neutral-darker, 5);
    }
    &.active {
        box-shadow: none;
        background-color: darken($neutral-darker, 10);
    }
}

.reveal-filter-options .round-icon.control {
    background-image:url("#{$image-url}icons/clear-wh.svg");
    background-color: $black;
    box-shadow: none;
    @include transition(background-image, background-color 250ms $ease-out-quint);
    @include swap-bg-image;
}
